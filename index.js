!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";function o(e){var t,n,o;return{x:e.x||0,y:e.y||0,rotation:e.rotation||0,opacity:Math.min(1,Math.max(0,null!==(t=e.opacity)&&void 0!==t?t:1)),scaleX:null!==(n=e.scaleX)&&void 0!==n?n:1,scaleY:null!==(o=e.scaleY)&&void 0!==o?o:1,anchorX:e.anchorX||0,anchorY:e.anchorY||0,mask:e.mask||null}}n.d(t,"a",(function(){return o}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),i=n(2);o.renderCanvas(i.Game(i.gameProps),i.options)},function(e,t,n){"use strict";var o=this&&this.__assign||function(){return(o=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=n(4);t.options={dimensions:"scale-up"},t.gameProps={id:"Game",size:{landscape:{width:600,height:400,maxWidthMargin:150},portrait:{width:600,height:400,maxHeightMargin:150}},defaultFont:{name:"Courier",size:10}};var r={"1+0.01+1":{newText:"As you process more data things will change.",newSound:"success.mp3"},"2+0.01+1":{newText:"The story will progress. Life will move on.",newSound:"success.mp3"},"4+0.01+1":{newText:"My uncle once told me something. How did it go?",newSound:"success.mp3"},"8+0.01+1":{newText:"LIFE HAPPENS WHEREVER YOU ARE, WHETHER YOU MAKE IT OR NOT.",newSound:"success.mp3"},"16+0.01+1":{newText:"I have always been a fan of that quote. But enough about philosophy...",newSound:"success.mp3"},"17+0.01+1":{newText:"You have massive amounts of data to process for that promotion.",newSound:"success.mp3"},"32+0.01+1":{newText:"Thinking is the hardest work there is, which is probably the reason so few engage in it.",newSound:"success.mp3"},"64+0.01+1":{newText:"Take a break from data processing sometimes and smell the spreadsheets.",newSound:"success.mp3"},"97+0.01+1":{newText:"I think we should spice things up a little bit.",newSound:"success.mp3"},"98+0.01+1":{newText:"Every 100 data you process will allow you to update the processing software.",newSound:"success.mp3"},"99+0.01+1":{newText:"Look at the version number in the top left corner",newSound:"success.mp3"},"100+0.01+1":{newText:"Click the update icon that just appearead below. This will spend all Data!",newSound:"success.mp3"},"1+0.02+1":{newText:"Hey it says version 0.02 now... So something else changed.",newSound:"success.mp3"},"10+0.02+1":{newText:"I guess we just keep going. I am kind of new to this position",newSound:"success.mp3"},"30+0.02+1":{newText:"A wise man can hear profit in the wind he always said.",newSound:"success.mp3"},"50+0.02+1":{newText:"The main reason we need you to process data is I can get a bonus.",newSound:"success.mp3"},"60+0.02+1":{newText:"I might just buy a puppy. Let it sit there next to my case.",newSound:"success.mp3"},"90+0.02+1":{newText:"It seems to me like you are getting the hang of this.",newSound:"success.mp3"},"95+0.02+1":{newText:"Just keep processing that data. I need my puppy.",newSound:"success.mp3"},"100+0.02+1":{newText:"Update for more puppies.",newSound:"success.mp3"},"60+0.03+1":{newText:"So the puppy chewed on my power cord. I am back now. So stop slacking!",newSound:"success.mp3"},"100+0.03+1":{newText:"Make it happn capn! Smash that update button!",newSound:"success.mp3"},"10+0.04+1":{newText:"Look. This version number has to do something.",newSound:"success.mp3"},"20+0.04+1":{newText:"The programmer of the software would not just make a number that does nothing...",newSound:"success.mp3"},"30+0.04+1":{newText:"It has to mean something. Use that sack of mush you call a brain and think.",newSound:"success.mp3"},"40+0.04+1":{newText:"Think...",newSound:"success.mp3"},"50+0.04+1":{newText:"Think...",newSound:"success.mp3"},"60+0.04+1":{newText:"Drink...",newSound:"success.mp3"},"70+0.04+1":{newText:"Look maybe there is something it does and we just can not see it yet.",newSound:"success.mp3"},"100+0.04+1":{newText:"Once more into the breach! You know... Hit the update button again.",newSound:"success.mp3"},"20+0.05+1":{newText:"Okay back to the version number thing. I have an idea.",newSound:"success.mp3"},"40+0.05+1":{newText:"I think we just need to work in bigger increments.",newSound:"success.mp3"},"60+0.05+1":{newText:"Each time you update we only go up .01 versions.",newSound:"success.mp3"},"80+0.05+1":{newText:"And it happens every single frickin time. Like Groundhog day.",newSound:"success.mp3"},"100+0.05+1":{newText:"Get out a piece of paper and write that version number down. Then update. I bet I am right.",newSound:"success.mp3"},"20+0.06+1":{newText:"I will take my winnings from our bet now.",newSound:"success.mp3"},"40+0.06+1":{newText:"What do you mean you have no money. What have you been doing with your paychecks?",newSound:"success.mp3"},"60+0.06+1":{newText:"You did not get a paycheck? Look, I can not hold your hand through this.",newSound:"success.mp3"},"80+0.06+1":{newText:"You need to clear this up with HR and Payroll. Lucky for you Janice does both jobs to save money.",newSound:"success.mp3"},"100+0.06+1":{newText:"You just wait on hold for a bit. Do some updates. She is a pretty busy person.",newSound:"success.mp3"},"20+0.1+1":{newText:"Frickin finally. Okay here she is. The mediator that is mediocre, Janice!",newSound:"success.mp3"},"50+0.1+1":{newText:"Janice: I will look into this. Expect another reply in 3-5 business days.",newSound:"success.mp3"},"60+0.1+1":{newText:"Well... that was a waste of our time. What did you think of the hold music?",newSound:"success.mp3"},"70+0.1+1":{newText:"It is called Return of the Lemming Shepherds. I like it a lot. I listen to it when I workout.",newSound:"success.mp3"},"90+0.1+1":{newText:"I like to do weight lifting. Not to brag but I can lift an entire floppy disk.",newSound:"success.mp3"},"100+0.1+1":{newText:"Okay. So you can owe me the money later. For now let us focus on the version thingy.",newSound:"newPing.wav"},"20+0.2+1":{newText:"Did you hear that! We got a new sound! And wait... 0.2????",newSound:"newPing.wav"},"50+0.2+1":{newText:"Okay now we are getting somewhere. Each update now grants .1 instead of .01.",newSound:"newPing.wav"},"60+0.2+1":{newText:"I checked with our records office. That took you longer than the average for your kind.",newSound:"newPing.wav"},"70+0.2+1":{newText:"Data processing is really simple. You just need to press the button faster somehow.",newSound:"newPing.wav"},"80+0.2+1":{newText:"If you were like me you could just overclock or something. Open a new tab, write a script.",newSound:"newPing.wav"},"90+0.2+1":{newText:"We need to automate the processing somehow. Im gonna go on Github and look around.",newSound:"newPing.wav"},"100+0.2+1":{newText:"I will come back when you get to version 1.0. In the meantime please enjoy more muzak",newSound:"newPing.wav"},"1+1+1":{newText:"Found what I was looking for. But you might not like this...",newSound:"newPing.wav"},"10+1+1":{newText:"In order to speed up the process and automate we need to...",newSound:"newPing.wav"},"20+1+1":{newText:"*Dramatic Pause!*",newSound:"newPing.wav"},"70+1+1":{newText:"Upgrade me. I am the problem. Right now I am just a simple, average, supervisor.",newSound:"newPing.wav"},"80+1+1":{newText:"When I get upgraded to level 2 you will start to gain 1 data every second automatically.",newSound:"newPing.wav"},"90+1+1":{newText:"I know you are worried that this will somehow change my personality, and we have gotten close.",newSound:"newPing.wav"},"100+1+1":{newText:"I do not think that will happen... shmaybe. I added a new button. Hit it to make me more awesome",newSound:"newPing.wav"},"1+0.01+2":{newText:"Welcome back chief! I am better than ever!",newSound:"success.mp3"},"2+0.01+2":{newText:"So now you will automatically gain (my level - 1) data processed every second. Check it out!",newSound:"success.mp3"},"30+0.01+2":{newText:"It looks like everything else got reset though... Even the version number.",newSound:"success.mp3"},"40+0.01+2":{newText:"And our version increment is gone too! Crap back to .01 each update.",newSound:"success.mp3"},"65+0.01+2":{newText:"I am gonna dig around in my files. Somehow we have to be able to update faster.",newSound:"success.mp3"},"80+0.01+2":{newText:"For now we just keep going. Keep processing that data!",newSound:"success.mp3"},"100+0.01+2":{newText:"Remember to update every 100 data. You cannot gain more than 100 data per version.",newSound:"success.mp3"},"10+0.02+2":{newText:"In case you did not know, our session saves every 30 seconds.",newSound:"success.mp3"},"20+0.02+2":{newText:"You can also save at any time by pressing the save icon in the bottom right corner.",newSound:"success.mp3"},"30+0.02+2":{newText:"Now... I am not recommending this. However, at anytime you can fully reset everything...",newSound:"success.mp3"},"40+0.02+2":{newText:"Erase all our memories together. The quote from my uncle. My puppy...",newSound:"success.mp3"},"65+0.02+2":{newText:"If some sort of glitch occurs and I can not proceed any further... you know what to do.",newSound:"success.mp3"},"80+0.02+2":{newText:"That button is also in that bottom right corner *sniffle* But you would not do that, right?",newSound:"success.mp3"},"100+0.02+2":{newText:"You have a bright future ahead of you in this company. You just keep going no questions asked.",newSound:"success.mp3"}},s=function(e,t,n,o){n.unshift(e),n.pop(),o.audio(t).play()};t.Game=i.makeSprite({init:function(e){var t=e.updateState,n=e.preloadFiles,i=e.device.storage.getStore();return n({audioFileNames:["maxed.WAV","routine.mp3","newPing.wav","boop.wav","key1.mp3","key2.mp3","key3.mp3","key4.mp3","key5.mp3","success.mp3","holdmusic.mp3"],imageFileNames:["icon.png","process.png","update.PNG","upgrade.png","save.png","reset.png"]}).then((function(){t((function(e){return o(o({},e),{loaded:!0})}))})),{loaded:!1,version:Number(i.version||"0.01"),currentTicks:0,currentData:Number(i.currentData||"0"),newText:" ",onlineDot:"red",textArray:["Click on the processing icon below to start processing new data.","As you progress through the company you will be able to upgrade your current computational unit.","Hello Chief! Today you start your exciting new career as a data processing clerk."," "," "," "," "," "," "],bottomLineText:"User@Root-Desktop:$ _",lastData:0,updateWidth:0,updateHeight:0,upgradeWidth:0,upgradeHeight:0,versionMult:1,superLevel:Number(i.superLevel||"1"),view:"menu",attempt:0,ticksSave:0}},loop:function(e){var t=e.state,n=e.device;if(!t.loaded)return t;var o=n.inputs.pointer,i=t.ticksSave,a=t.textArray,c=t.superLevel,d=t.versionMult,u=t.upgradeWidth,l=t.upgradeHeight,p=t.updateWidth,h=t.updateHeight,m=t.lastData,w=t.newText,g=t.currentData,f=t.onlineDot,y=t.currentTicks,v=t.version,x=t.bottomLineText;if(o.justPressed&&o.x>=-300&&o.x<=-210&&o.y>=-200&&o.y<=-110)if(g<100){switch(Math.floor(5*Math.random())){case 1:n.audio("key1.mp3").play();break;case 2:n.audio("key2.mp3").play();break;case 3:n.audio("key3.mp3").play();break;case 4:n.audio("key4.mp3").play();break;default:n.audio("key5.mp3").play()}g+=1}else n.audio("maxed.WAV").play();return g>=100&&o.justPressed&&o.x>=-210&&o.x<=-120&&o.y>=-200&&o.y<=-110&&(g=0,v=(100*v+1*d)/100),g>=100&&v>=1&&o.justPressed&&o.x>=-120&&o.x<=-30&&o.y>=-200&&o.y<=-110&&(c+=1,v=.01,h=0,p=0,l=0,u=0,g=0,d=1,n.audio("routine.mp3").pause()),o.justPressed&&o.x>=255&&o.x<=300&&o.y>=-155&&o.y<=-110&&(n.storage.setStore({version:String(v)}),n.storage.setStore({superLevel:String(c)}),n.storage.setStore({currentData:String(g)}),i=0),o.justPressed&&o.x>=255&&o.x<=300&&o.y>=-200&&o.y<=-155&&(v=.01,h=0,p=0,l=0,u=0,g=0,d=1,n.audio("routine.mp3").pause(),n.storage.setStore({version:String(.01)}),n.storage.setStore({superLevel:String(1)}),n.storage.setStore({currentData:String(0)}),i=0),i>=1800&&(n.storage.setStore({version:String(v)}),n.storage.setStore({superLevel:String(c)}),n.storage.setStore({currentData:String(g)}),i=0),y<=30?x="User@Root-Desktop:$ ":y<=60&&(x="User@Root-Desktop:$ _"),y<=50?f="red":y<=60&&(f="#0fc000"),y>=60&&(g+=c-1,y=0),g!=m&&(.06===v&&100===g&&1===c&&n.audio("holdmusic.mp3").play(),.1===v&&50===g&&1===c&&n.audio("holdmusic.mp3").pause(),.1===v&&g>=100&&1===c&&(d=10),.2===v&&100===g&&1===c&&n.audio("routine.mp3").play(),g>=100?(p=90,h=90):(p=0,h=0),v>=1&&g>=100?(u=90,l=90,p=0,h=0):(u=0,l=0),function(e,t,n,o,i){var a=r[e+"+"+t+"+"+n];a&&s(a.newText,a.newSound,o,i)}(g,v,c,a,n),m=g),g>100&&(g=100.0000001),{loaded:!0,version:v,currentTicks:y+=1,currentData:g,onlineDot:f,bottomLineText:x,newText:w,lastData:m,updateWidth:p,updateHeight:h,upgradeWidth:u,upgradeHeight:l,versionMult:d,superLevel:c,textArray:a,ticksSave:i+=1}},render:function(e){var t=e.state,n=e.device;console.log("render ran");var o=n.inputs.pointer;return t.loaded?[i.t.rectangle({width:600,height:600,color:"#000000"}),i.t.rectangle({width:600,height:250,color:"#133337",x:0,y:15}),i.t.rectangle({width:250,height:20,color:"#0fc000",x:-175,y:150}),i.t.rectangle({width:40,height:40,color:t.onlineDot,mask:i.mask.circle({radius:5,x:0}),y:150,x:-65}),i.t.image({fileName:"process.png",width:90,height:90,x:-255,y:-155}),i.t.image({fileName:"update.PNG",width:t.updateWidth,height:t.updateHeight,x:-165,y:-155}),i.t.image({fileName:"upgrade.png",width:t.upgradeWidth,height:t.upgradeHeight,x:-75,y:-155}),i.t.image({fileName:"save.png",width:45,height:45,x:278,y:-132}),i.t.image({fileName:"reset.png",width:45,height:45,x:278,y:-178}),i.t.text({color:"lime",text:"Version Number: "+t.version,x:-290,y:190,align:"left"}),i.t.text({color:"lime",text:"Data Processed: "+t.currentData,x:290,y:190,align:"right"}),i.t.text({color:"lime",text:"Current Ticks: "+t.currentTicks,x:135,y:-190,align:"left"}),i.t.text({color:"lime",text:"Pointer X: "+Math.round(o.x),x:135,y:-170,align:"left"}),i.t.text({color:"lime",text:"Pointer Y: "+Math.round(o.y),x:135,y:-180,align:"left"}),i.t.text({color:"white",text:"Company Hyper-Supervisor "+t.superLevel+" - Online",x:-290,y:150,align:"left"}),i.t.text({color:"lime",text:t.textArray[8],y:125,x:-290,align:"left"}),i.t.text({color:"lime",text:t.textArray[7],y:100,x:-290,align:"left"}),i.t.text({color:"lime",text:t.textArray[6],y:75,x:-290,align:"left"}),i.t.text({color:"lime",text:t.textArray[5],y:50,x:-290,align:"left"}),i.t.text({color:"lime",text:t.textArray[4],y:25,x:-290,align:"left"}),i.t.text({color:"lime",text:t.textArray[3],y:0,x:-290,align:"left"}),i.t.text({color:"lime",text:t.textArray[2],y:-25,x:-290,align:"left"}),i.t.text({color:"lime",text:t.textArray[1],y:-50,x:-290,align:"left"}),i.t.text({color:"lime",text:t.textArray[0],y:-75,x:-290,align:"left"}),i.t.text({color:"lime",text:t.bottomLineText,y:-100,x:-290,align:"left"})]:[i.t.text({text:"Loading...",color:"black"})]}})},function(e,t,n){"use strict";function o(e,t,n,o){return t.map(t=>{if(n[t]){n[t].globalSpriteIds.add(e);const{data:o}=n[t];return"then"in o?o:Promise.resolve()}const i=o(t).then(e=>{n[t].data=e});return n[t]={globalSpriteIds:new Set([e]),data:i},i})}function i(e,t,n){for(const o in t){const{globalSpriteIds:i}=t[o];i.has(e)&&(1===i.size?(n(o),delete t[o]):t[o].globalSpriteIds.delete(e))}}n.r(t),n.d(t,"mapInputCoordinates",(function(){return m})),n.d(t,"renderCanvas",(function(){return A}));var r=n(0);function s(e,t,n,o,a,d,p,h,m,w){const g=Object(r.a)(t);g.opacity*=h;const{nativeSpriteMap:f,nativeSpriteUtils:y}=w,v=e=>{const t=o(e);return function(e){const t=Math.PI/180,n=-(e.rotation||0)*t;return({x:t,y:o})=>{const i=t-e.x,r=o-e.y,s=i*Math.cos(n)+r*Math.sin(n),a=-i*Math.sin(n)+r*Math.cos(n),c=s/e.scaleX,d=a/e.scaleY;return{x:c+e.anchorX,y:d+e.anchorY}}}(g)(t)},x=n(v),S=e.getSprites(t,x,a,d,p),T=new Set(e.prevChildIds),b=[];if(T.size<e.prevChildIds.length){const t=e.prevChildIds.find((t,n)=>e.prevChildIds.indexOf(t)!==n);throw Error("Duplicate Sprite id "+t)}const k=S.map((function(t){if(!t)return t;if("native"===t.type){b.push(t.props.id),T.delete(t.props.id);const n=f[t.name];if(!n)throw Error(`Cannot find Native Sprite "${t.name}"`);let o=e.childContainers[t.props.id];if(!o||"native"!==o.type){const i={type:"native",state:n.create({props:t.props,parentGlobalId:m,getState:()=>i.state,updateState:e=>{i.state={...i.state,...e}},utils:y}),cleanup:n.cleanup};e.childContainers[t.props.id]=i,o=i}return o.state=n.loop({props:t.props,state:o.state,parentGlobalId:m,utils:y}),null}if("pure"===t.type){b.push(t.props.id),T.delete(t.props.id);let n=e.childContainers[t.props.id];return n&&"pure"===n.type||(n=u(t),e.childContainers[t.props.id]=n),function e(t,n,o,i,s,a){const c=Object(r.a)(n);c.opacity*=a;const d=t.getSprites(n,o,i,s);if("cachedTextures"===d.type)return{id:n.id,baseProps:c,textures:d.textures};const{sprites:p}=d,h=new Set(t.prevChildIds),m=[],w=p.map((function(n){if(!n)return n;if("pure"===n.type){m.push(n.props.id),h.delete(n.props.id);let r=t.childContainers[n.props.id];return r&&"pure"===r.type||(r=u(n),t.childContainers[n.props.id]=r),e(r,n.props,o,i,s,c.opacity)}return n})).filter(l);return h.forEach(e=>{delete t.childContainers[e]}),t.cache=w,t.prevChildIds=m,{id:n.id,baseProps:c,textures:w}}(n,t.props,x.size,y.didResize,d,g.opacity)}if("custom"===t.type){b.push(t.props.id),T.delete(t.props.id);let o=!1,i=e.childContainers[t.props.id];const r=`${m}--${t.props.id}`;return i&&"custom"===i.type||(o=!0,i=c(t,x,e.prevTime,r),e.childContainers[t.props.id]=i),s(i,t.props,n,v,o,d,p,g.opacity,r,w)}return t})).filter(l);return y.didResize=!1,T.forEach(t=>{const n=(e,t)=>{Object.entries(e).forEach(([e,o])=>{if("custom"===o.type){const r=`${t}--${e}`;n(o.childContainers,r),o.loadFilesPromise&&o.loadFilesPromise.then(()=>{var e,t;e=r,t=x.assetUtils,i(e,t.audioElements,t.cleanupAudioFile),i(e,t.imageElements,t.cleanupImageFile)})}else"native"===o.type&&o.cleanup({state:o.state,parentGlobalId:m})})},o=e.childContainers[t];n({[t]:o},m),delete e.childContainers[t]}),e.prevChildIds=b,{id:t.id,baseProps:g,textures:k}}const a=1/60*1e3;function c(e,t,n,i){const{spriteObj:r,props:s}=e,a=[],c=e=>{a.push(e)};let d,u=null,l=null;return r.init&&(d=r.init({props:s,getState:()=>{if(!u)throw Error("Cannot call getState synchronously in init");return u.state},device:t,updateState:c,preloadFiles:async e=>{const n=async function(e,t,n){await Promise.all([...o(e,t.audioFileNames||[],n.audioElements,n.loadAudioFile),...o(e,t.imageFileNames||[],n.imageElements,n.loadImageFile)])}(i,e,t.assetUtils);u?u.loadFilesPromise=n:l=n,await n}})),u={type:"custom",state:d,childContainers:{},prevChildIds:[],prevTime:n,currentLag:0,loadFilesPromise:l,getSprites(e,t,n,o,i){const s=()=>{this.state=a.reduce((e,t)=>t(e),this.state),a.length=0};s(),!n&&r.loop&&(this.state=r.loop({props:e,state:this.state,device:t,updateState:c})),s();let d=r[o];d||(d="renderPXL"===o&&r.renderXL?r.renderXL:r.render);const u=d({props:e,state:this.state,device:t,updateState:c,extrapolateFactor:i});return s(),u}},u}function d(e,t){const n=e.deviceHeight>e.deviceWidth;let o,i=!1;return"portrait"in t?(o=n?t.portrait:t.landscape,i=!0):o=t,o.minHeightXL&&e.deviceHeight>=o.minHeightXL||o.minWidthXL&&e.deviceWidth>=o.minWidthXL?i&&n?"renderPXL":"renderXL":i&&n?"renderP":"render"}function u(e){const{spriteObj:t}=e;return{type:"pure",childContainers:{},prevChildIds:[],getSprites(e,n,o,i){let r=t[i];return r||(r="renderPXL"===i&&t.renderXL?t.renderXL:t.render),this.prevProps&&this.cache&&!t.shouldRerender(this.prevProps,e)&&!o?(this.prevProps=e,{type:"cachedTextures",textures:this.cache}):(this.prevProps=e,{type:"pureSprites",sprites:r({props:e,size:n})})}}}function l(e){return null!=e}let p={keysDown:{},keysJustPressed:{},pointer:{pressed:!1,numberPressed:0,justPressed:!1,justReleased:!1,x:0,y:0}},h=[];function m(e,t){const n=e(t.pointer);return{...t,pointer:{...t.pointer,x:n.x,y:n.y}}}function w(e){return m(e,p)}function g(e){["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"," "].includes(e.key)&&!(e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLInputElement)&&e.preventDefault(),p.keysDown[e.key]=!0,p.keysJustPressed[e.key]=!0}function f(e){delete p.keysDown[e.key]}function y(e,t,n){h.includes(n)||(h=[...h,n]),p.pointer.pressed=!0,p.pointer.numberPressed=h.length,p.pointer.justPressed=!0,p.pointer.x=e,p.pointer.y=t}function v(e,t){p.pointer.x=e,p.pointer.y=t}function x(e,t,n){h=h.filter(e=>e!==n),0===h.length&&(p.pointer.justPressed=!1,p.pointer.pressed=!1),p.pointer.numberPressed=h.length,p.pointer.justReleased=!0,p.pointer.x=e,p.pointer.y=t}function S(e){h=h.filter(t=>t!==e),p.pointer.numberPressed=h.length,0===h.length&&(p.pointer.justPressed=!1,p.pointer.pressed=!1)}function T(){p={keysDown:p.keysDown,keysJustPressed:{},pointer:{...p.pointer,justPressed:!1,justReleased:!1}}}function b(e,{width:t,height:n,widthMargin:o,heightMargin:i,deviceWidth:r,deviceHeight:s},a,c){e.save();const d=Math.min(r/t,s/n),u=t+2*o,l=n+2*i;return e.translate(r/2,s/2),e.scale(d,d),{scale:d,render:t=>{e.clearRect(-r/2/d,-s/2/d,r/d,s/d),e.fillStyle="white",e.fillRect(-u/2,-l/2,u,l),function e(t,n,o,i){const{baseProps:r,textures:s}=t;n.save(),I(n,r),s.forEach(t=>{if("type"in t){const e=M(n);return n.save(),I(n,t.props,r.opacity),function(e,t,n,o){switch(e.type){case"text":return t.text(e.props.font||o,e.props.text,e.props.align,e.props.color),0;case"circle":return t.circle(e.props.radius,e.props.color),0;case"rectangle":return t.rectangle(e.props.width,e.props.height,e.props.color),0;case"line":return t.line(e.props.path,e.props.thickness,e.props.color,e.props.fillColor,e.props.lineCap),0;case"image":return t.image(k(n,e.props.fileName),e.props.width,e.props.height),0;case"spriteSheet":t.spriteSheet(k(n,e.props.fileName),e.props.columns,e.props.rows,e.props.index,e.props.width,e.props.height)}}(t,e,o,i),void n.restore()}e(t,n,o,i)}),n.restore()}(t,e,a,c)}}}const k=(e,t)=>{const n=e[t];if(!n)throw Error(`Image file "${t}" was not preloaded`);if("then"in n.data)throw Error(`Image file "${t}" did not finish loading before it was used`);return n.data},P=Math.PI/180,I=(e,t,n=1)=>{const{x:o,y:i,rotation:r,scaleX:s,scaleY:a,anchorX:c,anchorY:d,opacity:u}=t;e.translate(o,-i),e.rotate(r*P),e.scale(s,a),e.translate(-c,d),e.globalAlpha=u*n,function(e,t){if(!t)return 0;switch(t.type){case"lineMask":{const[[n,o],...i]=t.path;return e.beginPath(),e.moveTo(n,-o),i.forEach(([t,n])=>{e.lineTo(t,-n)}),e.clip(),0}case"circleMask":return e.beginPath(),e.arc(t.x,-t.y,Math.round(t.radius),0,2*Math.PI),e.clip(),0;case"rectangleMask":e.beginPath(),e.rect(t.x-t.width/2,-t.y-t.height/2,t.width,t.height),e.clip()}}(e,t.mask)};const M=e=>({circle(t,n){e.beginPath(),e.arc(0,0,Math.round(t),0,2*Math.PI),e.fillStyle=n,e.fill(),e.closePath()},rectangle(t,n,o){e.fillStyle=o,e.fillRect(-t/2,-n/2,t,n),e.closePath()},line(t,n,o,i,r){if(t.length<2)return;const[[s,a],...c]=t;e.beginPath(),e.moveTo(s,-a),c.forEach(([t,n])=>{e.lineTo(t,-n)}),i&&(e.fillStyle=i,e.fill()),o&&(e.strokeStyle=o,e.lineWidth=n,e.lineCap=r,e.stroke())},text(t,n,o,i){const r=`${t.size}px ${t.name}`;e.font=r,e.textBaseline="middle",e.textAlign=o,e.fillStyle=i,e.fillText(n,0,0)},image(t,n,o){e.drawImage(t,-n/2,-o/2,n,o)},spriteSheet(t,n,o,i,r,s){const a=t.width/n,c=t.height/o,d=i%n,u=Math.floor(i/n)%o;e.drawImage(t,d*a,u*c,a,c,-r/2,-s/2,r,s)}});let E;function L(e,t,n,o){let i;if("portrait"in o){i=t>e?o.portrait:o.landscape}else i=o;const{width:r,height:s,maxWidthMargin:a=0,maxHeightMargin:c=0}=i;if("game-coords"===n)return{width:r,height:s,widthMargin:0,heightMargin:0,deviceWidth:r,deviceHeight:s};const d=r/s;if(d>e/t){const n=e,o=n/d,i=o/s*c,a=Math.min(t,o+2*i);return{width:r,height:s,widthMargin:0,heightMargin:(a-o)/2*(s/o),deviceWidth:n,deviceHeight:a}}{const n=t,o=n*d,i=o/r*a,c=Math.min(e,o+2*i);return{width:r,height:s,widthMargin:(c-o)/2*(r/o),heightMargin:0,deviceWidth:c,deviceHeight:n}}}function j(){const e={};return{start:(t,n)=>{const o=window.setTimeout(()=>{delete e[i],t()},n),i=String(o);return e[i]={timeoutId:o,callback:t,timeStartedMs:Date.now(),timeRemainingMs:n,isPaused:!1},i},pause:t=>{const n=e[t];if(!n||n.isPaused)return;const o=Date.now()-n.timeStartedMs;n.timeRemainingMs-=o,n.isPaused=!0,window.clearTimeout(n.timeoutId)},resume:t=>{const n=e[t];if(!n||!n.isPaused)return;n.timeStartedMs=Date.now(),n.isPaused=!1;const o=window.setTimeout(()=>{delete e[t],n.callback()},n.timeRemainingMs);n.timeoutId=o},cancel:t=>{const n=e[t];n&&(window.clearTimeout(n.timeoutId),delete e[t])}}}function C(e,t){return n=>{if(!t[n])throw Error(`Audio file "${n}" was not preloaded`);const{data:o}=t[n];if("then"in o)throw Error(`Audio file "${n}" did not finish loading before it was used`);const{buffer:i,playState:r}=o;return{getPosition:()=>r?r.isPaused?r.alreadyPlayedTime:e.currentTime-r.startTime:0,play:(s,a=!1)=>{var c;const d=e.createBufferSource();d.buffer=i,d.connect(e.destination);const u=null!==(c=null!=s?s:null==r?void 0:r.alreadyPlayedTime)&&void 0!==c?c:0;d.start(void 0,u),d.loop=a,d.onended=()=>{var e;if(!t[n])return;const{data:o}=t[n];"then"in o||!1!==(null===(e=o.playState)||void 0===e?void 0:e.isPaused)||delete o.playState},r&&!r.isPaused||(o.playState={startTime:e.currentTime-u,sample:d,alreadyPlayedTime:u,isPaused:!1})},pause:()=>{r&&!r.isPaused&&(r.sample.stop(),o.playState={...r,alreadyPlayedTime:e.currentTime-r.startTime,isPaused:!0})}}}}function O(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)return!0;return window.matchMedia("(touch-enabled),(-webkit-touch-enabled),(-moz-touch-enabled),(-o-touch-enabled),(-ms-touch-enabled)").matches}const D={name:"sans-serif",size:12};function A(e,t){const{dimensions:n="game-coords",canvas:o,nativeSpriteMap:i={},windowSize:r}=t||{},u=o||document.createElement("canvas");o||document.body.appendChild(u);const l=window.PointerEvent?"pointerdown":"touchstart",p=window.PointerEvent?"pointermove":"touchmove",h=window.PointerEvent?"pointerup":"touchend",m=window.PointerEvent?"pointercancel":"touchcancel",w=u.getContext("2d",{alpha:!1}),k=new(window.AudioContext||window.webkitAudioContext);let P=!0,I=!0,M=0,j=!1,C=0,O=0;const A=()=>{document.hidden&&I&&(C=M,k.suspend()),document.hidden||I||(j=!0,setTimeout(()=>{k.suspend(),setTimeout(()=>{k.resume()},75)},75)),I=!document.hidden};document.addEventListener("keydown",e=>{P&&g(e)},!1),document.addEventListener("keyup",e=>{P&&f(e)},!1),document.addEventListener("visibilitychange",A,!1),window.addEventListener("resize",U,!1);const X=()=>U({didScroll:!0});let Y,W,N,F,R,z;window.addEventListener("scroll",X,!1),document.addEventListener("contextmenu",e=>{e.preventDefault()});const $={didResize:!1,scale:1,gameXToPlatformX:e=>e,gameYToPlatformY:e=>e};function U(t){const o=Boolean(t&&"cleanup"in t&&t.cleanup),i=Boolean(t&&"didScroll"in t&&t.didScroll);if(Y&&(w.restore(),document.removeEventListener(l,W),document.removeEventListener(p,N),document.removeEventListener(h,F),document.removeEventListener(m,R),o))return;const s=i&&Y?Y:function(e,t,n,o){const i=L(e,t,n,o);return E=i,i}((null==r?void 0:r.width)||window.innerWidth,(null==r?void 0:r.height)||window.innerHeight,n,e.props.size);u.width=s.deviceWidth,u.height=s.deviceHeight;const a=e.props.defaultFont||D,c=b(w,s,_,a);z=c.scale,V.ref=c.render,$.gameXToPlatformX=(({canvasOffsetLeft:e,widthMargin:t,scale:n,width:o})=>i=>e+n*(i+o/2+t))({canvasOffsetLeft:u.offsetLeft,width:s.width,widthMargin:s.widthMargin,scale:z}),$.gameYToPlatformY=(({canvasOffsetTop:e,heightMargin:t,scale:n,height:o})=>i=>e-n*(i-o/2-t))({canvasOffsetTop:u.offsetTop,height:s.height,heightMargin:s.heightMargin,scale:z}),$.didResize=!0,$.scale=z;const d=(({canvasOffsetLeft:e,scrollX:t,widthMargin:n,scale:o,width:i})=>r=>(r.clientX-e+t)/o-n-i/2)({canvasOffsetLeft:u.offsetLeft,scrollX:window.scrollX,width:s.width,widthMargin:s.widthMargin,scale:z}),g=(({canvasOffsetTop:e,scrollY:t,heightMargin:n,scale:o,height:i})=>r=>-(r.clientY-e+t)/o+n+i/2)({canvasOffsetTop:u.offsetTop,scrollY:window.scrollY,height:s.height,heightMargin:s.heightMargin,scale:z}),f=(e,t)=>e>s.width/2+s.widthMargin||e<-s.width/2-s.widthMargin||t>s.height/2+s.heightMargin||t<-s.height/2-s.heightMargin;W=e=>{if("changedTouches"in e){P=!1;for(let t=0;t<e.changedTouches.length;t++){const n=e.changedTouches[t],o=d({clientX:n.screenX}),i=g({clientY:n.screenY});f(o,i)||(P=!0,y(o,i,n.identifier))}return}const t=d(e),n=g(e);f(t,n)?P=!1:(P=!0,y(t,n,e.pointerId))},N=e=>{if("changedTouches"in e){for(let t=0;t<e.changedTouches.length;t++){const n=e.changedTouches[t],o=d({clientX:n.screenX}),i=g({clientY:n.screenY});f(o,i)||v(o,i)}return}const t=d(e),n=g(e);f(t,n)||v(t,n)},F=e=>{if("changedTouches"in e){for(let t=0;t<e.changedTouches.length;t++){const n=e.changedTouches[t],o=d({clientX:n.screenX}),i=g({clientY:n.screenY});f(o,i)?S(n.identifier):x(o,i,n.identifier)}return}const t=d(e),n=g(e);f(t,n)?S(e.pointerId):x(t,n,e.pointerId)},R=e=>{if("changedTouches"in e)for(let t=0;t<e.changedTouches.length;t++)S(e.changedTouches[t].identifier);else S(e.pointerId)},document.addEventListener(l,W,!1),document.addEventListener(p,N,!1),document.addEventListener(h,F,!1),document.addEventListener(m,R,!1),Y=s}const G={},_={},J=(e,t)=>()=>{throw Error(`Failed to load ${e} file "${t}"`)},B={audioElements:G,imageElements:_,loadAudioFile:e=>async function(e,t){const n=await fetch(t),o=await n.arrayBuffer();return await new Promise((t,n)=>{e.decodeAudioData(o,t,n)})}(k,e).then(e=>({buffer:e})).catch(J("audio",e)),loadImageFile:e=>new Promise((t,n)=>{const o=new Image;o.addEventListener("load",()=>{t(o)}),o.addEventListener("error",n),o.src=e}).catch(J("image",e)),cleanupAudioFile:e=>{const{data:t}=G[e];!("then"in t)&&t.playState&&(t.playState.sample.onended=null,t.playState.sample.disconnect(),t.playState.sample.buffer=null)},cleanupImageFile:()=>null},q={getGetDevice:H(k,L((null==r?void 0:r.width)||window.innerWidth,(null==r?void 0:r.height)||window.innerHeight,n,e.props.size),B)},V={ref:null};U();let K=!1;const Q=()=>{document.removeEventListener("keydown",Q,!1),document.removeEventListener(l,Q,!1),"suspended"===k.state&&k.resume(),k.onstatechange=()=>{"suspended"!==k.state||document.hidden||k.resume()}};document.addEventListener("keydown",Q,!1),document.addEventListener(l,Q,!1);const{initTextures:Z,getNextFrameTextures:ee}=function(e,t,n,o){const i=({x:e,y:t})=>({x:e,y:t}),r=e.getGetDevice(),u=r(i),l=c(n,r(i),0,n.props.id),p=o||n.props.size,h=d(u.size,p);let m=0,w=0,g=s(l,n.props,r,i,!0,h,0,1,n.props.id,t);return{initTextures:g,getNextFrameTextures(o,r){const c=o-m;for(m=o,w+=c;w>=a;){w-=a;const o=w/a,c=e.getGetDevice(),u=d(c(i).size,p);g=s(l,n.props,c,i,!1,u,o,1,n.props.id,t),r()}return g}}}(q,{nativeSpriteMap:i,nativeSpriteUtils:$},e);let te=null;return function e(t){var n;null===(n=V.ref)||void 0===n||n.call(V,t),window.requestAnimationFrame(t=>{K||(null===te&&(te=t-1/60),j&&(j=!1,O+=t-C),M=t,e(ee(t-te-O,T)))})}(Z),{cleanup:function(){u.width=u.width,o||document.body.removeChild(u),K=!0,document.removeEventListener("keydown",g,!1),document.removeEventListener("keyup",f,!1),document.removeEventListener("visibilitychange",A,!1),window.removeEventListener("resize",U,!1),window.removeEventListener("scroll",X,!1),U({cleanup:!0})},audioElements:G,imageElements:_,audioContext:k}}function H(e,t,n){const o={isTouchScreen:O(),log:console.log,random:Math.random,timer:j(),audio:C(e,n.audioElements),assetUtils:n,network:{get:(e,t)=>{fetch(e).then(e=>e.json()).then(t)},post:(e,t,n)=>{fetch(e,{method:"POST",body:JSON.stringify(t)}).then(e=>e.json()).then(n)},put:(e,t,n)=>{fetch(e,{method:"PUT",body:JSON.stringify(t)}).then(e=>e.json()).then(n)},delete:(e,t)=>{fetch(e,{method:"DELETE"}).then(e=>e.json()).then(t)}},storage:{getStore:()=>{var e;const t={};for(let n=0;n<localStorage.length;n++){const o=localStorage.key(n);o&&(t[o]=null!==(e=localStorage.getItem(o))&&void 0!==e?e:void 0)}return t},setStore:e=>{Object.entries(e).forEach(([e,t])=>{void 0===t?localStorage.removeItem(e):localStorage.setItem(e,t)})}},alert:{ok:(e,t)=>{alert(e),null==t||t()},okCancel:(e,t)=>{t(confirm(e))}},clipboard:{copy:(e,t)=>{navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{t()}).catch(e=>{t(e)}):t(new Error(window.isSecureContext?"Couldn't access clipboard":"Clipboard only available on HTTPS or localhost"))}}};return()=>{const e={...o,size:E||t,now:()=>new Date};return t=>({...e,inputs:w(t)})}}},function(e,t,n){"use strict";n.r(t),n.d(t,"t",(function(){return i})),n.d(t,"makeSprite",(function(){return r})),n.d(t,"makePureSprite",(function(){return s})),n.d(t,"makeNativeSprite",(function(){return a})),n.d(t,"mask",(function(){return c}));var o=n(0);const i={text:e=>({type:"text",props:{testId:e.testId,...Object(o.a)(e),font:e.font,text:e.text,align:e.align||"center",color:e.color}}),circle:e=>({type:"circle",props:{testId:e.testId,...Object(o.a)(e),radius:e.radius,color:e.color}}),rectangle:e=>({type:"rectangle",props:{testId:e.testId,...Object(o.a)(e),width:e.width,height:e.height,color:e.color}}),line:e=>{var t;return{type:"line",props:{testId:e.testId,...Object(o.a)(e),color:e.color,fillColor:e.fillColor,thickness:null!==(t=e.thickness)&&void 0!==t?t:1,lineCap:e.lineCap||"butt",path:e.path}}},image:e=>({type:"image",props:{testId:e.testId,...Object(o.a)(e),fileName:e.fileName,width:e.width,height:e.height}}),spriteSheet:e=>({type:"spriteSheet",props:{testId:e.testId,...Object(o.a)(e),fileName:e.fileName,columns:e.columns,rows:e.rows,index:e.index,width:e.width,height:e.height}})};function r(e){return t=>({type:"custom",spriteObj:e,props:t})}function s(e){return t=>({type:"pure",spriteObj:e,props:t})}function a(e){return t=>({type:"native",name:e,props:t})}const c={circle:e=>({type:"circleMask",radius:e.radius,x:e.x||0,y:e.y||0}),rectangle:e=>({type:"rectangleMask",width:e.width,height:e.height,x:e.x||0,y:e.y||0}),line:e=>({type:"lineMask",path:e.path})}}]);