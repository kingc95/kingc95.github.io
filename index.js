!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){"use strict";function n(e){var t,i,n;return{x:e.x||0,y:e.y||0,rotation:e.rotation||0,opacity:Math.min(1,Math.max(0,null!==(t=e.opacity)&&void 0!==t?t:1)),scaleX:null!==(i=e.scaleX)&&void 0!==i?i:1,scaleY:null!==(n=e.scaleY)&&void 0!==n?n:1,anchorX:e.anchorX||0,anchorY:e.anchorY||0,mask:e.mask||null}}i.d(t,"a",(function(){return n}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3),o=i(2);n.renderCanvas(o.Game(o.gameProps),o.options)},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=i(4);t.options={dimensions:"scale-up"},t.gameProps={id:"Game",size:{landscape:{width:600,height:400,maxWidthMargin:150},portrait:{width:400,height:600,maxHeightMargin:150}},defaultFont:{name:"Courier",size:10}},t.Game=o.makeSprite({init:function(e){var t=e.updateState;return(0,e.preloadFiles)({audioFileNames:["routine.mp3","newPing.wav","boop.wav","key1.mp3","key2.mp3","key3.mp3","key4.mp3","key5.mp3","success.mp3","holdmusic.mp3"],imageFileNames:["icon.png","process.png","update.PNG","upgrade.png","save.png"]}).then((function(){t((function(e){return n(n({},e),{loaded:!0})}))})),{loaded:!1,posX:0,posY:0,targetX:0,targetY:0,version:.01,currentTicks:0,currentData:0,newText:" ",onlineDot:"red",textLine0:" ",textLine1:" ",textLine2:" ",textLine3:" ",textLine4:" ",textLine5:" ",textLine6:"Hello Chief! Today you start your exciting new career as a data processing clerk.",textLine7:"As you progress through the company you will be able to upgrade your current computational unit.",textLine8:"Click on the processing icon below to start processing new data.",textLine9:"User@Root-Desktop:$ _",lastData:0,updateWidth:0,updateHeight:0,upgradeWidth:0,upgradeHeight:0,versionMult:1,superLevel:1}},loop:function(e){var t=e.state,i=e.device;if(!t.loaded)return t;var n=i.inputs.pointer,o=t.superLevel,a=t.versionMult,s=t.upgradeWidth,r=t.upgradeHeight,c=t.updateWidth,d=t.updateHeight,l=t.lastData,u=t.newText,p=t.currentData,h=t.onlineDot,m=t.currentTicks,g=t.version,y=t.textLine0,f=t.textLine1,w=t.textLine2,v=t.textLine3,x=t.textLine4,k=t.textLine5,b=t.textLine6,P=t.textLine7,L=t.textLine8,I=t.textLine9;if(n.justPressed&&n.x>=-300&&n.x<=-230&&n.y>=-200&&n.y<=-110){var T=Math.floor(5*Math.random());1==T&&i.audio("key1.mp3").play(),2==T&&i.audio("key2.mp3").play(),3==T&&i.audio("key3.mp3").play(),4==T?i.audio("key4.mp3").play():i.audio("key5.mp3").play(),p+=1}return p>=100&&n.justPressed&&n.x>=-230&&n.x<=-140&&n.y>=-200&&n.y<=-110&&(p=0,g=(100*g+1*a)/100),p>=100&&g>=1&&n.justPressed&&n.x>=-140&&n.x<=-50&&n.y>=-200&&n.y<=-110&&(o+=1,g=.01,d=0,c=0,r=0,s=0,p=0,a=1),m<=30?I="User@Root-Desktop:$ ":m<=60&&(I="User@Root-Desktop:$ _"),m<=50?h="red":m<=60&&(h="#0fc000"),m>=60&&(p+=o-1,m=0),.01==g&&p!=l?1==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="As you process more data things will change.",l=p,i.audio("success.mp3").play()):2==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="The story will progress. Life will move on.",l=p,i.audio("success.mp3").play()):4==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="My uncle once told me something. How did it go?",l=p,i.audio("success.mp3").play()):8==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="LIFE HAPPENS WHEREVER YOU ARE, WHETHER YOU MAKE IT OR NOT.",l=p,i.audio("success.mp3").play()):16==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="I have always been a fan of that quote. But enough about philosophy...",l=p,i.audio("success.mp3").play()):17==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="You have massive amounts of data to process for that promotion.",l=p,i.audio("success.mp3").play()):32==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Thinking is the hardest work there is, which is probably the reason so few engage in it.",l=p,i.audio("success.mp3").play()):64==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Take a break from data processing sometimes and smell the spreadsheets.",l=p,i.audio("success.mp3").play()):97==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="I think we should spice things up a little bit.",l=p,i.audio("success.mp3").play()):98==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Every 100 data you process will allow you to update the processing software.",l=p,i.audio("success.mp3").play()):99==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Look at the version number in the top left corner",l=p,i.audio("success.mp3").play()):100==p&&(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Click the update icon that just appearead below. This will spend all Data!",l=p,i.audio("success.mp3").play(),c=80,d=80):.02==g&&p!=l?1==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Hey it says version 0.02 now... So something else changed.",l=p,i.audio("success.mp3").play()):10==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="I guess we just keep going. I am kind of new to this position",l=p,i.audio("success.mp3").play()):20==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="I did have an internship at Quarks bar on DS9.",l=p,i.audio("success.mp3").play()):30==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="A wise man can hear profit in the wind he always said.",l=p,i.audio("success.mp3").play()):40==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Not hard to hear with those radar dishes he had for ears.",l=p,i.audio("success.mp3").play()):50==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="The main reason we need you to process data is I can get a bonus.",l=p,i.audio("success.mp3").play()):60==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="I might just buy a puppy. Let it sit there next to my case.",l=p,i.audio("success.mp3").play()):70==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="I had a pet gorilla once. His name was Bonzi. He was my best buddy.",l=p,i.audio("success.mp3").play()):80==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="I had to put him down. He was malware and he kept leaving my emails unread.",l=p,i.audio("success.mp3").play()):90==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="It seems to me like you are getting the hang of this.",l=p,i.audio("success.mp3").play()):95==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Just keep processing that data. I need my puppy.",l=p,i.audio("success.mp3").play()):100==p&&(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Update for more puppies.",l=p,i.audio("success.mp3").play()):.03==g&&p!=l?60==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="So the puppy chewed on my power cord. I am back now. So stop slacking!",l=p,i.audio("success.mp3").play()):96==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Just keep clicking. Just keep clicking.",l=p,i.audio("success.mp3").play()):97==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Just keep clicking, clicking, what do we do we click,",l=p,i.audio("success.mp3").play()):98==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="click,",l=p,i.audio("success.mp3").play()):99==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="click!",l=p,i.audio("success.mp3").play()):100==p&&(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Make it happn capn! Smash that update button!",l=p,i.audio("success.mp3").play()):.04==g&&p!=l?10==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Look. This version number has to do something.",l=p,i.audio("success.mp3").play()):20==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="The programmer of the software would not just make a number that does nothing...",l=p,i.audio("success.mp3").play()):30==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="It has to mean something. Use that sack of mush you call and brain and think.",l=p,i.audio("success.mp3").play()):40==p||50==p||60==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Think...",l=p,i.audio("success.mp3").play()):70==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Drink...",l=p,i.audio("success.mp3").play()):80==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Think...",l=p,i.audio("success.mp3").play()):90==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Look maybe there is something it does and we just can not see it yet.",l=p,i.audio("success.mp3").play()):100==p&&(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Once more into the breach! You know... Hit the update button again.",l=p,i.audio("success.mp3").play()):.05==g&&p!=l?20==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Okay back to the version number thing. I have an idea.",l=p,i.audio("success.mp3").play()):40==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="I think we just need to work in bigger increments.",l=p,i.audio("success.mp3").play()):60==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Each time you update we only go up .01 versions.",l=p,i.audio("success.mp3").play()):80==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="And it happens every single frickin time. Like Groundhog day.",l=p,i.audio("success.mp3").play()):100==p&&(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Get out a piece of paper and write that version number down. Then update. I bet I am right.",l=p,i.audio("success.mp3").play()):.06==g&&p!=l?20==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="I will take my winnings from out bet now.",l=p,i.audio("success.mp3").play()):40==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="What do you mean you have no money. What have you been doing with your paychecks?",l=p,i.audio("success.mp3").play()):60==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="You did not get a paycheck? Look, I can not hold your hand through this.",l=p,i.audio("success.mp3").play()):80==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="You need to clear this up with HR and Payroll. Lucky for you Janice does both jobs to save money.",l=p,i.audio("success.mp3").play()):100==p&&(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="You just wait on hold for a bit. Do some updates. She is a pretty busy person.",l=p,i.audio("success.mp3").play(),i.audio("holdmusic.mp3").play()):.1==g&&p!=l?20==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Frickin finally. Okay here she is. The mediator that is mediocre, Janice!",l=p,i.audio("success.mp3").play()):50==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Janice: I will look into this. Expect another reply in 3-5 business days.",l=p,i.audio("success.mp3").play(),i.audio("holdmusic.mp3").pause()):60==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Well... that was a waste of our time. What did you think of the hold music?",l=p,i.audio("success.mp3").play()):70==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="It is called Return of the Lemming Shepherds. I like it a lot. I listen to it when I workout.",l=p,i.audio("success.mp3").play()):90==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="I like to do weight lifting. Not to brag but I can lift an entire floppy disk.",l=p,i.audio("success.mp3").play()):100==p&&(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Okay. So you can owe me the money later. For now let us focus on the version thingy.",l=p,i.audio("newPing.wav").play(),a=10):.2==g&&p!=l?20==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Did you hear that! We got a new sound! And wait... 0.2????",l=p,i.audio("newPing.wav").play()):50==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Okay now we are getting somewhere. Each update now grants .1 instead of .01.",l=p,i.audio("newPing.wav").play()):60==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="I checked with our records office. That took you longer than the average for your kind.",l=p,i.audio("newPing.wav").play()):70==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Data processing is really simple. You just need to press the button faster somehow.",l=p,i.audio("newPing.wav").play()):80==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="If you were like me you could just overclock or something. Open a new tab, write a script.",l=p,i.audio("newPing.wav").play()):90==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="We need to automate the processing somehow. Im gonna go on Github and look around.",l=p,i.audio("newPing.wav").play()):100==p&&(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="I will come back when you get to version 1.0. In the meantime please enjoy more muzak",l=p,i.audio("newPing.wav").play(),i.audio("routine.mp3").play()):1==g&&p!=l&&(1==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Found what I was looking for. But you might not like this...",l=p,i.audio("newPing.wav").play()):10==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="In order to speed up the process and automate we need to...",l=p,i.audio("newPing.wav").play()):20==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="*Dramatic Pause!*",l=p,i.audio("newPing.wav").play()):70==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="Upgrade me. I am the problem. Right now I am just a simple, average, supervisor.",l=p,i.audio("newPing.wav").play()):80==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="When I get upgraded to level 2 you will start to gain 1 data every second automatically.",l=p,i.audio("newPing.wav").play()):90==p?(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="I know you are worried that this will somehow change my personality, and we have gotten close.",l=p,i.audio("newPing.wav").play()):100==p&&(y=f,f=w,w=v,v=x,x=k,k=b,b=P,P=L,L=u="But I do not think that will happen... shmaybe. I added a new button. Hit it to make me more awesome",l=p,i.audio("newPing.wav").play(),s=80,r=80)),{loaded:!0,posX:0,posY:0,targetX:0,targetY:0,version:g,currentTicks:m+=1,currentData:p,onlineDot:h,textLine0:y,textLine1:f,textLine2:w,textLine3:v,textLine4:x,textLine5:k,textLine6:b,textLine7:P,textLine8:L,textLine9:I,newText:u,lastData:l,updateWidth:c,updateHeight:d,upgradeWidth:s,upgradeHeight:r,versionMult:a,superLevel:o}},render:function(e){var t=e.state,i=e.device.inputs.pointer;return t.loaded?[o.t.rectangle({width:600,height:600,color:"#000000"}),o.t.rectangle({width:600,height:250,color:"#133337",x:0,y:15}),o.t.rectangle({width:250,height:20,color:"#0fc000",x:-175,y:150}),o.t.rectangle({width:40,height:40,color:t.onlineDot,mask:o.mask.circle({radius:5,x:0}),y:150,x:-65}),o.t.image({fileName:"process.png",width:80,height:80,x:-260,y:-155}),o.t.text({color:"lime",text:"Version Number: "+t.version,x:-225,y:190}),o.t.text({color:"lime",text:"Data Processed: "+t.currentData,x:150,y:190}),o.t.text({color:"lime",text:"Current Ticks: "+t.currentTicks,x:150,y:150}),o.t.text({color:"lime",text:"Pointer X: "+i.x,x:-200,y:175}),o.t.text({color:"lime",text:"Pointer Y: "+i.y,x:50,y:175}),o.t.text({color:"white",text:"Company Hyper-Supervisor "+t.superLevel+" - Online",x:-290,y:150,align:"left"}),o.t.text({color:"lime",text:t.textLine0,y:125,x:-290,align:"left"}),o.t.text({color:"lime",text:t.textLine1,y:100,x:-290,align:"left"}),o.t.text({color:"lime",text:t.textLine2,y:75,x:-290,align:"left"}),o.t.text({color:"lime",text:t.textLine3,y:50,x:-290,align:"left"}),o.t.text({color:"lime",text:t.textLine4,y:25,x:-290,align:"left"}),o.t.text({color:"lime",text:t.textLine5,y:0,x:-290,align:"left"}),o.t.text({color:"lime",text:t.textLine6,y:-25,x:-290,align:"left"}),o.t.text({color:"lime",text:t.textLine7,y:-50,x:-290,align:"left"}),o.t.text({color:"lime",text:t.textLine8,y:-75,x:-290,align:"left"}),o.t.text({color:"lime",text:t.textLine9,y:-100,x:-290,align:"left"}),o.t.image({fileName:"update.PNG",width:t.updateWidth,height:t.updateHeight,x:-180,y:-155}),o.t.image({fileName:"upgrade.png",width:t.upgradeWidth,height:t.upgradeHeight,x:-100,y:-155}),o.t.image({fileName:"save.png",width:80,height:80,x:260,y:-155})]:[o.t.text({text:"Loading...",color:"black"})]}})},function(e,t,i){"use strict";function n(e,t,i,n){return t.map(t=>{if(i[t]){i[t].globalSpriteIds.add(e);const{data:n}=i[t];return"then"in n?n:Promise.resolve()}const o=n(t).then(e=>{i[t].data=e});return i[t]={globalSpriteIds:new Set([e]),data:o},o})}function o(e,t,i){for(const n in t){const{globalSpriteIds:o}=t[n];o.has(e)&&(1===o.size?(i(n),delete t[n]):t[n].globalSpriteIds.delete(e))}}i.r(t),i.d(t,"mapInputCoordinates",(function(){return m})),i.d(t,"renderCanvas",(function(){return X}));var a=i(0);function s(e,t,i,n,r,d,p,h,m,g){const y=Object(a.a)(t);y.opacity*=h;const{nativeSpriteMap:f,nativeSpriteUtils:w}=g,v=e=>{const t=n(e);return function(e){const t=Math.PI/180,i=-(e.rotation||0)*t;return({x:t,y:n})=>{const o=t-e.x,a=n-e.y,s=o*Math.cos(i)+a*Math.sin(i),r=-o*Math.sin(i)+a*Math.cos(i),c=s/e.scaleX,d=r/e.scaleY;return{x:c+e.anchorX,y:d+e.anchorY}}}(y)(t)},x=i(v),k=e.getSprites(t,x,r,d,p),b=new Set(e.prevChildIds),P=[];if(b.size<e.prevChildIds.length){const t=e.prevChildIds.find((t,i)=>e.prevChildIds.indexOf(t)!==i);throw Error("Duplicate Sprite id "+t)}const L=k.map((function(t){if(!t)return t;if("native"===t.type){P.push(t.props.id),b.delete(t.props.id);const i=f[t.name];if(!i)throw Error(`Cannot find Native Sprite "${t.name}"`);let n=e.childContainers[t.props.id];if(!n||"native"!==n.type){const o={type:"native",state:i.create({props:t.props,parentGlobalId:m,getState:()=>o.state,updateState:e=>{o.state={...o.state,...e}},utils:w}),cleanup:i.cleanup};e.childContainers[t.props.id]=o,n=o}return n.state=i.loop({props:t.props,state:n.state,parentGlobalId:m,utils:w}),null}if("pure"===t.type){P.push(t.props.id),b.delete(t.props.id);let i=e.childContainers[t.props.id];return i&&"pure"===i.type||(i=l(t),e.childContainers[t.props.id]=i),function e(t,i,n,o,s,r){const c=Object(a.a)(i);c.opacity*=r;const d=t.getSprites(i,n,o,s);if("cachedTextures"===d.type)return{id:i.id,baseProps:c,textures:d.textures};const{sprites:p}=d,h=new Set(t.prevChildIds),m=[],g=p.map((function(i){if(!i)return i;if("pure"===i.type){m.push(i.props.id),h.delete(i.props.id);let a=t.childContainers[i.props.id];return a&&"pure"===a.type||(a=l(i),t.childContainers[i.props.id]=a),e(a,i.props,n,o,s,c.opacity)}return i})).filter(u);return h.forEach(e=>{delete t.childContainers[e]}),t.cache=g,t.prevChildIds=m,{id:i.id,baseProps:c,textures:g}}(i,t.props,x.size,w.didResize,d,y.opacity)}if("custom"===t.type){P.push(t.props.id),b.delete(t.props.id);let n=!1,o=e.childContainers[t.props.id];const a=`${m}--${t.props.id}`;return o&&"custom"===o.type||(n=!0,o=c(t,x,e.prevTime,a),e.childContainers[t.props.id]=o),s(o,t.props,i,v,n,d,p,y.opacity,a,g)}return t})).filter(u);return w.didResize=!1,b.forEach(t=>{const i=(e,t)=>{Object.entries(e).forEach(([e,n])=>{if("custom"===n.type){const a=`${t}--${e}`;i(n.childContainers,a),n.loadFilesPromise&&n.loadFilesPromise.then(()=>{var e,t;e=a,t=x.assetUtils,o(e,t.audioElements,t.cleanupAudioFile),o(e,t.imageElements,t.cleanupImageFile)})}else"native"===n.type&&n.cleanup({state:n.state,parentGlobalId:m})})},n=e.childContainers[t];i({[t]:n},m),delete e.childContainers[t]}),e.prevChildIds=P,{id:t.id,baseProps:y,textures:L}}const r=1/60*1e3;function c(e,t,i,o){const{spriteObj:a,props:s}=e,r=[],c=e=>{r.push(e)};let d,l=null,u=null;return a.init&&(d=a.init({props:s,getState:()=>{if(!l)throw Error("Cannot call getState synchronously in init");return l.state},device:t,updateState:c,preloadFiles:async e=>{const i=async function(e,t,i){await Promise.all([...n(e,t.audioFileNames||[],i.audioElements,i.loadAudioFile),...n(e,t.imageFileNames||[],i.imageElements,i.loadImageFile)])}(o,e,t.assetUtils);l?l.loadFilesPromise=i:u=i,await i}})),l={type:"custom",state:d,childContainers:{},prevChildIds:[],prevTime:i,currentLag:0,loadFilesPromise:u,getSprites(e,t,i,n,o){const s=()=>{this.state=r.reduce((e,t)=>t(e),this.state),r.length=0};s(),!i&&a.loop&&(this.state=a.loop({props:e,state:this.state,device:t,updateState:c})),s();let d=a[n];d||(d="renderPXL"===n&&a.renderXL?a.renderXL:a.render);const l=d({props:e,state:this.state,device:t,updateState:c,extrapolateFactor:o});return s(),l}},l}function d(e,t){const i=e.deviceHeight>e.deviceWidth;let n,o=!1;return"portrait"in t?(n=i?t.portrait:t.landscape,o=!0):n=t,n.minHeightXL&&e.deviceHeight>=n.minHeightXL||n.minWidthXL&&e.deviceWidth>=n.minWidthXL?o&&i?"renderPXL":"renderXL":o&&i?"renderP":"render"}function l(e){const{spriteObj:t}=e;return{type:"pure",childContainers:{},prevChildIds:[],getSprites(e,i,n,o){let a=t[o];return a||(a="renderPXL"===o&&t.renderXL?t.renderXL:t.render),this.prevProps&&this.cache&&!t.shouldRerender(this.prevProps,e)&&!n?(this.prevProps=e,{type:"cachedTextures",textures:this.cache}):(this.prevProps=e,{type:"pureSprites",sprites:a({props:e,size:i})})}}}function u(e){return null!=e}let p={keysDown:{},keysJustPressed:{},pointer:{pressed:!1,numberPressed:0,justPressed:!1,justReleased:!1,x:0,y:0}},h=[];function m(e,t){const i=e(t.pointer);return{...t,pointer:{...t.pointer,x:i.x,y:i.y}}}function g(e){return m(e,p)}function y(e){["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"," "].includes(e.key)&&!(e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLInputElement)&&e.preventDefault(),p.keysDown[e.key]=!0,p.keysJustPressed[e.key]=!0}function f(e){delete p.keysDown[e.key]}function w(e,t,i){h.includes(i)||(h=[...h,i]),p.pointer.pressed=!0,p.pointer.numberPressed=h.length,p.pointer.justPressed=!0,p.pointer.x=e,p.pointer.y=t}function v(e,t){p.pointer.x=e,p.pointer.y=t}function x(e,t,i){h=h.filter(e=>e!==i),0===h.length&&(p.pointer.justPressed=!1,p.pointer.pressed=!1),p.pointer.numberPressed=h.length,p.pointer.justReleased=!0,p.pointer.x=e,p.pointer.y=t}function k(e){h=h.filter(t=>t!==e),p.pointer.numberPressed=h.length,0===h.length&&(p.pointer.justPressed=!1,p.pointer.pressed=!1)}function b(){p={keysDown:p.keysDown,keysJustPressed:{},pointer:{...p.pointer,justPressed:!1,justReleased:!1}}}function P(e,{width:t,height:i,widthMargin:n,heightMargin:o,deviceWidth:a,deviceHeight:s},r,c){e.save();const d=Math.min(a/t,s/i),l=t+2*n,u=i+2*o;return e.translate(a/2,s/2),e.scale(d,d),{scale:d,render:t=>{e.clearRect(-a/2/d,-s/2/d,a/d,s/d),e.fillStyle="white",e.fillRect(-l/2,-u/2,l,u),function e(t,i,n,o){const{baseProps:a,textures:s}=t;i.save(),T(i,a),s.forEach(t=>{if("type"in t){const e=S(i);return i.save(),T(i,t.props,a.opacity),function(e,t,i,n){switch(e.type){case"text":return t.text(e.props.font||n,e.props.text,e.props.align,e.props.color),0;case"circle":return t.circle(e.props.radius,e.props.color),0;case"rectangle":return t.rectangle(e.props.width,e.props.height,e.props.color),0;case"line":return t.line(e.props.path,e.props.thickness,e.props.color,e.props.fillColor,e.props.lineCap),0;case"image":return t.image(L(i,e.props.fileName),e.props.width,e.props.height),0;case"spriteSheet":t.spriteSheet(L(i,e.props.fileName),e.props.columns,e.props.rows,e.props.index,e.props.width,e.props.height)}}(t,e,n,o),void i.restore()}e(t,i,n,o)}),i.restore()}(t,e,r,c)}}}const L=(e,t)=>{const i=e[t];if(!i)throw Error(`Image file "${t}" was not preloaded`);if("then"in i.data)throw Error(`Image file "${t}" did not finish loading before it was used`);return i.data},I=Math.PI/180,T=(e,t,i=1)=>{const{x:n,y:o,rotation:a,scaleX:s,scaleY:r,anchorX:c,anchorY:d,opacity:l}=t;e.translate(n,-o),e.rotate(a*I),e.scale(s,r),e.translate(-c,d),e.globalAlpha=l*i,function(e,t){if(!t)return 0;switch(t.type){case"lineMask":{const[[i,n],...o]=t.path;return e.beginPath(),e.moveTo(i,-n),o.forEach(([t,i])=>{e.lineTo(t,-i)}),e.clip(),0}case"circleMask":return e.beginPath(),e.arc(t.x,-t.y,Math.round(t.radius),0,2*Math.PI),e.clip(),0;case"rectangleMask":e.beginPath(),e.rect(t.x-t.width/2,-t.y-t.height/2,t.width,t.height),e.clip()}}(e,t.mask)};const S=e=>({circle(t,i){e.beginPath(),e.arc(0,0,Math.round(t),0,2*Math.PI),e.fillStyle=i,e.fill(),e.closePath()},rectangle(t,i,n){e.fillStyle=n,e.fillRect(-t/2,-i/2,t,i),e.closePath()},line(t,i,n,o,a){if(t.length<2)return;const[[s,r],...c]=t;e.beginPath(),e.moveTo(s,-r),c.forEach(([t,i])=>{e.lineTo(t,-i)}),o&&(e.fillStyle=o,e.fill()),n&&(e.strokeStyle=n,e.lineWidth=i,e.lineCap=a,e.stroke())},text(t,i,n,o){const a=`${t.size}px ${t.name}`;e.font=a,e.textBaseline="middle",e.textAlign=n,e.fillStyle=o,e.fillText(i,0,0)},image(t,i,n){e.drawImage(t,-i/2,-n/2,i,n)},spriteSheet(t,i,n,o,a,s){const r=t.width/i,c=t.height/n,d=o%i,l=Math.floor(o/i)%n;e.drawImage(t,d*r,l*c,r,c,-a/2,-s/2,a,s)}});let M;function E(e,t,i,n){let o;if("portrait"in n){o=t>e?n.portrait:n.landscape}else o=n;const{width:a,height:s,maxWidthMargin:r=0,maxHeightMargin:c=0}=o;if("game-coords"===i)return{width:a,height:s,widthMargin:0,heightMargin:0,deviceWidth:a,deviceHeight:s};const d=a/s;if(d>e/t){const i=e,n=i/d,o=n/s*c,r=Math.min(t,n+2*o);return{width:a,height:s,widthMargin:0,heightMargin:(r-n)/2*(s/n),deviceWidth:i,deviceHeight:r}}{const i=t,n=i*d,o=n/a*r,c=Math.min(e,n+2*o);return{width:a,height:s,widthMargin:(c-n)/2*(a/n),heightMargin:0,deviceWidth:c,deviceHeight:i}}}function j(){const e={};return{start:(t,i)=>{const n=window.setTimeout(()=>{delete e[o],t()},i),o=String(n);return e[o]={timeoutId:n,callback:t,timeStartedMs:Date.now(),timeRemainingMs:i,isPaused:!1},o},pause:t=>{const i=e[t];if(!i||i.isPaused)return;const n=Date.now()-i.timeStartedMs;i.timeRemainingMs-=n,i.isPaused=!0,window.clearTimeout(i.timeoutId)},resume:t=>{const i=e[t];if(!i||!i.isPaused)return;i.timeStartedMs=Date.now(),i.isPaused=!1;const n=window.setTimeout(()=>{delete e[t],i.callback()},i.timeRemainingMs);i.timeoutId=n},cancel:t=>{const i=e[t];i&&(window.clearTimeout(i.timeoutId),delete e[t])}}}function C(e,t){return i=>{if(!t[i])throw Error(`Audio file "${i}" was not preloaded`);const{data:n}=t[i];if("then"in n)throw Error(`Audio file "${i}" did not finish loading before it was used`);const{buffer:o,playState:a}=n;return{getPosition:()=>a?a.isPaused?a.alreadyPlayedTime:e.currentTime-a.startTime:0,play:(s,r=!1)=>{var c;const d=e.createBufferSource();d.buffer=o,d.connect(e.destination);const l=null!==(c=null!=s?s:null==a?void 0:a.alreadyPlayedTime)&&void 0!==c?c:0;d.start(void 0,l),d.loop=r,d.onended=()=>{var e;if(!t[i])return;const{data:n}=t[i];"then"in n||!1!==(null===(e=n.playState)||void 0===e?void 0:e.isPaused)||delete n.playState},a&&!a.isPaused||(n.playState={startTime:e.currentTime-l,sample:d,alreadyPlayedTime:l,isPaused:!1})},pause:()=>{a&&!a.isPaused&&(a.sample.stop(),n.playState={...a,alreadyPlayedTime:e.currentTime-a.startTime,isPaused:!0})}}}}function O(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)return!0;return window.matchMedia("(touch-enabled),(-webkit-touch-enabled),(-moz-touch-enabled),(-o-touch-enabled),(-ms-touch-enabled)").matches}const D={name:"sans-serif",size:12};function X(e,t){const{dimensions:i="game-coords",canvas:n,nativeSpriteMap:o={},windowSize:a}=t||{},l=n||document.createElement("canvas");n||document.body.appendChild(l);const u=window.PointerEvent?"pointerdown":"touchstart",p=window.PointerEvent?"pointermove":"touchmove",h=window.PointerEvent?"pointerup":"touchend",m=window.PointerEvent?"pointercancel":"touchcancel",g=l.getContext("2d",{alpha:!1}),L=new(window.AudioContext||window.webkitAudioContext);let I=!0,T=!0,S=0,j=!1,C=0,O=0;const X=()=>{document.hidden&&T&&(C=S,L.suspend()),document.hidden||T||(j=!0,setTimeout(()=>{L.suspend(),setTimeout(()=>{L.resume()},75)},75)),T=!document.hidden};document.addEventListener("keydown",e=>{I&&y(e)},!1),document.addEventListener("keyup",e=>{I&&f(e)},!1),document.addEventListener("visibilitychange",X,!1),window.addEventListener("resize",U,!1);const Y=()=>U({didScroll:!0});let W,F,N,R,A,z;window.addEventListener("scroll",Y,!1),document.addEventListener("contextmenu",e=>{e.preventDefault()});const $={didResize:!1,scale:1,gameXToPlatformX:e=>e,gameYToPlatformY:e=>e};function U(t){const n=Boolean(t&&"cleanup"in t&&t.cleanup),o=Boolean(t&&"didScroll"in t&&t.didScroll);if(W&&(g.restore(),document.removeEventListener(u,F),document.removeEventListener(p,N),document.removeEventListener(h,R),document.removeEventListener(m,A),n))return;const s=o&&W?W:function(e,t,i,n){const o=E(e,t,i,n);return M=o,o}((null==a?void 0:a.width)||window.innerWidth,(null==a?void 0:a.height)||window.innerHeight,i,e.props.size);l.width=s.deviceWidth,l.height=s.deviceHeight;const r=e.props.defaultFont||D,c=P(g,s,_,r);z=c.scale,V.ref=c.render,$.gameXToPlatformX=(({canvasOffsetLeft:e,widthMargin:t,scale:i,width:n})=>o=>e+i*(o+n/2+t))({canvasOffsetLeft:l.offsetLeft,width:s.width,widthMargin:s.widthMargin,scale:z}),$.gameYToPlatformY=(({canvasOffsetTop:e,heightMargin:t,scale:i,height:n})=>o=>e-i*(o-n/2-t))({canvasOffsetTop:l.offsetTop,height:s.height,heightMargin:s.heightMargin,scale:z}),$.didResize=!0,$.scale=z;const d=(({canvasOffsetLeft:e,scrollX:t,widthMargin:i,scale:n,width:o})=>a=>(a.clientX-e+t)/n-i-o/2)({canvasOffsetLeft:l.offsetLeft,scrollX:window.scrollX,width:s.width,widthMargin:s.widthMargin,scale:z}),y=(({canvasOffsetTop:e,scrollY:t,heightMargin:i,scale:n,height:o})=>a=>-(a.clientY-e+t)/n+i+o/2)({canvasOffsetTop:l.offsetTop,scrollY:window.scrollY,height:s.height,heightMargin:s.heightMargin,scale:z}),f=(e,t)=>e>s.width/2+s.widthMargin||e<-s.width/2-s.widthMargin||t>s.height/2+s.heightMargin||t<-s.height/2-s.heightMargin;F=e=>{if("changedTouches"in e){I=!1;for(let t=0;t<e.changedTouches.length;t++){const i=e.changedTouches[t],n=d({clientX:i.screenX}),o=y({clientY:i.screenY});f(n,o)||(I=!0,w(n,o,i.identifier))}return}const t=d(e),i=y(e);f(t,i)?I=!1:(I=!0,w(t,i,e.pointerId))},N=e=>{if("changedTouches"in e){for(let t=0;t<e.changedTouches.length;t++){const i=e.changedTouches[t],n=d({clientX:i.screenX}),o=y({clientY:i.screenY});f(n,o)||v(n,o)}return}const t=d(e),i=y(e);f(t,i)||v(t,i)},R=e=>{if("changedTouches"in e){for(let t=0;t<e.changedTouches.length;t++){const i=e.changedTouches[t],n=d({clientX:i.screenX}),o=y({clientY:i.screenY});f(n,o)?k(i.identifier):x(n,o,i.identifier)}return}const t=d(e),i=y(e);f(t,i)?k(e.pointerId):x(t,i,e.pointerId)},A=e=>{if("changedTouches"in e)for(let t=0;t<e.changedTouches.length;t++)k(e.changedTouches[t].identifier);else k(e.pointerId)},document.addEventListener(u,F,!1),document.addEventListener(p,N,!1),document.addEventListener(h,R,!1),document.addEventListener(m,A,!1),W=s}const G={},_={},J=(e,t)=>()=>{throw Error(`Failed to load ${e} file "${t}"`)},B={audioElements:G,imageElements:_,loadAudioFile:e=>async function(e,t){const i=await fetch(t),n=await i.arrayBuffer();return await new Promise((t,i)=>{e.decodeAudioData(n,t,i)})}(L,e).then(e=>({buffer:e})).catch(J("audio",e)),loadImageFile:e=>new Promise((t,i)=>{const n=new Image;n.addEventListener("load",()=>{t(n)}),n.addEventListener("error",i),n.src=e}).catch(J("image",e)),cleanupAudioFile:e=>{const{data:t}=G[e];!("then"in t)&&t.playState&&(t.playState.sample.onended=null,t.playState.sample.disconnect(),t.playState.sample.buffer=null)},cleanupImageFile:()=>null},q={getGetDevice:H(L,E((null==a?void 0:a.width)||window.innerWidth,(null==a?void 0:a.height)||window.innerHeight,i,e.props.size),B)},V={ref:null};U();let K=!1;const Q=()=>{document.removeEventListener("keydown",Q,!1),document.removeEventListener(u,Q,!1),"suspended"===L.state&&L.resume(),L.onstatechange=()=>{"suspended"!==L.state||document.hidden||L.resume()}};document.addEventListener("keydown",Q,!1),document.addEventListener(u,Q,!1);const{initTextures:Z,getNextFrameTextures:ee}=function(e,t,i,n){const o=({x:e,y:t})=>({x:e,y:t}),a=e.getGetDevice(),l=a(o),u=c(i,a(o),0,i.props.id),p=n||i.props.size,h=d(l.size,p);let m=0,g=0,y=s(u,i.props,a,o,!0,h,0,1,i.props.id,t);return{initTextures:y,getNextFrameTextures(n,a){const c=n-m;for(m=n,g+=c;g>=r;){g-=r;const n=g/r,c=e.getGetDevice(),l=d(c(o).size,p);y=s(u,i.props,c,o,!1,l,n,1,i.props.id,t),a()}return y}}}(q,{nativeSpriteMap:o,nativeSpriteUtils:$},e);let te=null;return function e(t){var i;null===(i=V.ref)||void 0===i||i.call(V,t),window.requestAnimationFrame(t=>{K||(null===te&&(te=t-1/60),j&&(j=!1,O+=t-C),S=t,e(ee(t-te-O,b)))})}(Z),{cleanup:function(){l.width=l.width,n||document.body.removeChild(l),K=!0,document.removeEventListener("keydown",y,!1),document.removeEventListener("keyup",f,!1),document.removeEventListener("visibilitychange",X,!1),window.removeEventListener("resize",U,!1),window.removeEventListener("scroll",Y,!1),U({cleanup:!0})},audioElements:G,imageElements:_,audioContext:L}}function H(e,t,i){const n={isTouchScreen:O(),log:console.log,random:Math.random,timer:j(),audio:C(e,i.audioElements),assetUtils:i,network:{get:(e,t)=>{fetch(e).then(e=>e.json()).then(t)},post:(e,t,i)=>{fetch(e,{method:"POST",body:JSON.stringify(t)}).then(e=>e.json()).then(i)},put:(e,t,i)=>{fetch(e,{method:"PUT",body:JSON.stringify(t)}).then(e=>e.json()).then(i)},delete:(e,t)=>{fetch(e,{method:"DELETE"}).then(e=>e.json()).then(t)}},storage:{getStore:()=>{var e;const t={};for(let i=0;i<localStorage.length;i++){const n=localStorage.key(i);n&&(t[n]=null!==(e=localStorage.getItem(n))&&void 0!==e?e:void 0)}return t},setStore:e=>{Object.entries(e).forEach(([e,t])=>{void 0===t?localStorage.removeItem(e):localStorage.setItem(e,t)})}},alert:{ok:(e,t)=>{alert(e),null==t||t()},okCancel:(e,t)=>{t(confirm(e))}},clipboard:{copy:(e,t)=>{navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{t()}).catch(e=>{t(e)}):t(new Error(window.isSecureContext?"Couldn't access clipboard":"Clipboard only available on HTTPS or localhost"))}}};return()=>{const e={...n,size:M||t,now:()=>new Date};return t=>({...e,inputs:g(t)})}}},function(e,t,i){"use strict";i.r(t),i.d(t,"t",(function(){return o})),i.d(t,"makeSprite",(function(){return a})),i.d(t,"makePureSprite",(function(){return s})),i.d(t,"makeNativeSprite",(function(){return r})),i.d(t,"mask",(function(){return c}));var n=i(0);const o={text:e=>({type:"text",props:{testId:e.testId,...Object(n.a)(e),font:e.font,text:e.text,align:e.align||"center",color:e.color}}),circle:e=>({type:"circle",props:{testId:e.testId,...Object(n.a)(e),radius:e.radius,color:e.color}}),rectangle:e=>({type:"rectangle",props:{testId:e.testId,...Object(n.a)(e),width:e.width,height:e.height,color:e.color}}),line:e=>{var t;return{type:"line",props:{testId:e.testId,...Object(n.a)(e),color:e.color,fillColor:e.fillColor,thickness:null!==(t=e.thickness)&&void 0!==t?t:1,lineCap:e.lineCap||"butt",path:e.path}}},image:e=>({type:"image",props:{testId:e.testId,...Object(n.a)(e),fileName:e.fileName,width:e.width,height:e.height}}),spriteSheet:e=>({type:"spriteSheet",props:{testId:e.testId,...Object(n.a)(e),fileName:e.fileName,columns:e.columns,rows:e.rows,index:e.index,width:e.width,height:e.height}})};function a(e){return t=>({type:"custom",spriteObj:e,props:t})}function s(e){return t=>({type:"pure",spriteObj:e,props:t})}function r(e){return t=>({type:"native",name:e,props:t})}const c={circle:e=>({type:"circleMask",radius:e.radius,x:e.x||0,y:e.y||0}),rectangle:e=>({type:"rectangleMask",width:e.width,height:e.height,x:e.x||0,y:e.y||0}),line:e=>({type:"lineMask",path:e.path})}}]);